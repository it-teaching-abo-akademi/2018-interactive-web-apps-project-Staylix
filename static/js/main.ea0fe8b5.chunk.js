(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{213:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(64),o=a.n(s),r=a(1),l=a(5),i=a(6),h=a(9),u=a(7),m=a(8),d=a(65),p="https://api.iextrading.com/1.0/";function b(e){return p+"stock/"+encodeURI(e)+"/quote"}var f=["#537c8e","#2ebdbd","#ceae7f","#85583f","#847370","#de9396","#b94a59","#6a0a29","#423c6d","#7a839e","#94b5c2","#eadcc1"],v=["#537c8e44","#2ebdbd44","#ceae7f44","#85583f44","#84737044","#de939644","#b94a5944","#6a0a2944","#423c6d44","#7a839e44","#94b5c244","#eadcc144"],y=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement("button",{className:this.props.classes,onClick:this.props.action,type:this.props.type},c.a.createElement("span",null,c.a.createElement("b",null,this.props.content),c.a.createElement("i",{className:"material-icons"},this.props.icon)))}}]),t}(n.Component),E=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"lds-ellipsis"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null))}}]),t}(n.Component),g=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(u.a)(t).call(this,e))).state={value:""},a.handleChange=a.handleChange.bind(Object(r.a)(Object(r.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(r.a)(Object(r.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){this.props.onSubmit(this.state.value),e.preventDefault()}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:this.handleSubmit,className:"form-inline"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"id_input"},this.props.label),c.a.createElement("input",{id:"id_input",type:"text",className:"form-control",value:this.state.value,onChange:this.handleChange})),c.a.createElement(y,{classes:this.props.buttonClass,content:this.props.buttonContent,icon:"add_circle_outline",type:"submit"})))}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(u.a)(t).call(this,e))).state={value1:"",value2:""},a.handleChange=a.handleChange.bind(Object(r.a)(Object(r.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(r.a)(Object(r.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){var t=this.state;t[e.target.name]=e.target.value,this.setState(t)}},{key:"handleSubmit",value:function(e){this.props.onSubmit(this.state),e.preventDefault()}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:this.handleSubmit,className:"my-3"},c.a.createElement("div",{className:"form-group row"},c.a.createElement("label",{htmlFor:"value1",className:"col-md-3 col-form-label"},this.props.labels[0]),c.a.createElement("div",{className:"col-md-9"},c.a.createElement("input",{id:"value1",name:"value1",type:this.props.types[0],className:"form-control",value:this.state.value1,onChange:this.handleChange}))),c.a.createElement("div",{className:"form-group row"},c.a.createElement("label",{htmlFor:"value2",className:"col-md-3 col-form-label"},this.props.labels[1]),c.a.createElement("div",{className:"col-md-9"},c.a.createElement("input",{id:"value2",name:"value2",type:this.props.types[0],className:"form-control",value:this.state.value2,onChange:this.handleChange}))),c.a.createElement(y,{classes:this.props.buttonClass,content:this.props.buttonContent,icon:"add_circle_outline",type:"submit"})))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(u.a)(t).call(this,e))).state={portfolios:{},currencyRate:0,showChart:!1,stocksChart:[],labelsChart:[],datasetsChart:[],range:"1d"},a.addPortfolio=a.addPortfolio.bind(Object(r.a)(Object(r.a)(a))),a.removePortfolio=a.removePortfolio.bind(Object(r.a)(Object(r.a)(a))),a.addStock=a.addStock.bind(Object(r.a)(Object(r.a)(a))),a.removeSelectedStocks=a.removeSelectedStocks.bind(Object(r.a)(Object(r.a)(a))),a.changeCurrency=a.changeCurrency.bind(Object(r.a)(Object(r.a)(a))),a.addCheckedStock=a.addCheckedStock.bind(Object(r.a)(Object(r.a)(a))),a.getCurrencyExchangeRate=a.getCurrencyExchangeRate.bind(Object(r.a)(Object(r.a)(a))),a.changeSelectState=a.changeSelectState.bind(Object(r.a)(Object(r.a)(a))),a.showChart=a.showChart.bind(Object(r.a)(Object(r.a)(a))),a.hideModal=a.hideModal.bind(Object(r.a)(Object(r.a)(a))),a.changeRange=a.changeRange.bind(Object(r.a)(Object(r.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"addPortfolio",value:function(e){var t=this.state.portfolios;t.length>=10?alert("You cannot have more than 10 portfolios."):e.length<1?alert("Please choose a name."):e in t?alert("This portfolio name is already used."):t[e]={name:e,stocks:[],currency:"EUR"},this.setState({portfolios:t})}},{key:"removePortfolio",value:function(e){var t=this.state.portfolios;delete t[e],this.setState({portfolios:t})}},{key:"addStock",value:function(e,t){var a=this;t.symbol=t.symbol.toUpperCase();var n=this.state.portfolios;if(t.symbol.length<1)alert("Please give the stock symbol.");else if(t.shares<1)alert("Please add at least 1 share.");else{var c=b(t.symbol);fetch(c).then(function(e){return e.json()}).then(function(c){c==={}?alert("Unknown symbol."):a.addCheckedStock(n,e,t)},function(e){alert("Unknown symbol. Error: "+e)})}}},{key:"addCheckedStock",value:function(e,t,a){if(e[t].stocks.length>=50)alert("You cannot have more than 50 stocks.");else{var n=!1;e[t].stocks.forEach(function(e){e.symbol===a.symbol&&(n=!0)}),n?alert("This symbol is already added."):e[t].stocks.push(a)}this.setState({portfolios:e})}},{key:"removeSelectedStocks",value:function(e){var t=this.state.portfolios;t[e].stocks.forEach(function(a,n){a.selected&&t[e].stocks.splice(n,1)}),this.setState({portfolios:t})}},{key:"changeSelectState",value:function(e,t){var a=this.state.portfolios;a[e].stocks.forEach(function(e){e.symbol===t&&(e.selected=!e.selected)}),this.setState({portfolios:a})}},{key:"changeCurrency",value:function(e){var t=this.state.portfolios;"EUR"===t[e].currency?t[e].currency="USD":t[e].currency="EUR",this.setState({portfolios:t})}},{key:"getCurrencyExchangeRate",value:function(){var e=this;fetch("https://www.alphavantage.co/query?apikey=0ZHUEM2KZK605UBO&function=CURRENCY_EXCHANGE_RATE&from_currency=USD&to_currency=EUR").then(function(e){return e.json()}).then(function(t){e.setState({currencyRate:t["Realtime Currency Exchange Rate"]["5. Exchange Rate"]})},function(t){e.setState({currencyRate:0,error:t})})}},{key:"showChart",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"object"===typeof a&&(a=this.state.range);var n=this.state.portfolios[e].stocks.filter(function(e){return e.selected});if(n.length<1)alert("Select at least one stock.");else{this.setState({showChart:!0,stocksChart:n,lastPortfolio:e});var c=[],s=[],o=function(e,t){for(var a="",n={"1d":"4","1m":"1","3m":"2","6m":"3",ytd:"4","1y":"6","2y":"9","5y":"16"}[t],c=0;c<e.length;c++)c>0&&(a+=","),a+=e[c].symbol;return p+"stock/market/batch?types=chart&symbols="+encodeURI(a)+"&range="+t+"&chartInterval="+n}(n,a);fetch(o).then(function(e){return e.json()}).then(function(e){if(e==={})alert("Impossible to fetch data.");else{for(var a in c=Object.values(Object.values(e)[0].chart).map(function(e){return e.label}),Object.keys(e)){var n=Object.keys(e)[a],o=Object.values(e[n].chart).map(function(e){return e.close}),r=Math.floor(Math.random()*f.length);s.push({label:n,data:o,borderColor:f[r],backgroundColor:v[r],spanGaps:!0})}t.setState({labelsChart:c,datasetsChart:s})}},function(e){alert("Impossible to fetch data."),t.setState({error:e})})}}},{key:"hideModal",value:function(){this.setState({showChart:!1})}},{key:"changeRange",value:function(e){this.setState({range:e}),this.showChart(this.state.lastPortfolio,e)}},{key:"componentDidMount",value:function(){this.getCurrencyExchangeRate();var e=JSON.parse(localStorage.getItem("portfolios"));"undefined"!==typeof e&&null!==e||(e={}),this.setState({portfolios:e}),window.addEventListener("beforeunload",this.saveStateToLocalStorage.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.saveStateToLocalStorage.bind(this)),this.saveStateToLocalStorage()}},{key:"saveStateToLocalStorage",value:function(){localStorage.setItem("portfolios",JSON.stringify(this.state.portfolios))}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.portfolios),a=this.state.portfolios,n=t.map(function(t){return c.a.createElement(k,{key:a[t].name,name:a[t].name,stocks:a[t].stocks,currency:a[t].currency,currencyRate:e.state.currencyRate,removePortfolio:e.removePortfolio,addStock:e.addStock,removeSelectedStocks:e.removeSelectedStocks,changeCurrency:e.changeCurrency,changeSelectState:e.changeSelectState,showChart:e.showChart})});if(n.length>1){for(var s=[],o=[],r=0;r<n.length;++r)r%2===0?s.unshift(n[r]):o.unshift(n[r]);n=c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12 col-lg-6 px-3"},s),c.a.createElement("div",{className:"col-12 col-lg-6 px-3"},o))}return c.a.createElement("div",null,c.a.createElement("div",{className:"centered"},c.a.createElement("h1",{className:"mt-3"},"Your Portfolios"),c.a.createElement(g,{onSubmit:this.addPortfolio,label:"Portfolio Name",buttonContent:"Add new Portfolio",buttonClass:"myBtn-dark"})),c.a.createElement(S,{hideModal:this.hideModal,labels:this.state.labelsChart,datasets:this.state.datasetsChart,shown:this.state.showChart,changeRange:this.changeRange,range:this.state.range}),c.a.createElement("div",{className:"mt-4"},n))}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(u.a)(t).call(this,e))).callAddStock=a.callAddStock.bind(Object(r.a)(Object(r.a)(a))),a.callChangeCurrency=a.callChangeCurrency.bind(Object(r.a)(Object(r.a)(a))),a.callChangeSelectState=a.callChangeSelectState.bind(Object(r.a)(Object(r.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"callAddStock",value:function(e){var t={symbol:e.value1,shares:e.value2};this.props.addStock(this.props.name,t)}},{key:"callChangeCurrency",value:function(){this.props.changeCurrency(this.props.name)}},{key:"callChangeSelectState",value:function(e){this.props.changeSelectState(this.props.name,e)}},{key:"render",value:function(){var e=this,t=this.props.stocks.map(function(t){return c.a.createElement(w,{key:t.symbol,symbol:t.symbol,shares:t.shares,selected:t.selected,currency:e.props.currency,currencyRate:e.props.currencyRate,changeSelectState:e.callChangeSelectState})});return c.a.createElement("div",{className:"portfolio mb-4 animated fadeIn slow"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-8"},c.a.createElement("h1",null,this.props.name),c.a.createElement(y,{classes:"myBtn-light",content:"Remove Portfolio",icon:"delete_outline",action:this.props.removePortfolio.bind(this,this.props.name)})),c.a.createElement("div",{className:"col-4"},c.a.createElement(N,{currency:this.props.currency,changeCurrency:this.callChangeCurrency}))),c.a.createElement(j,{onSubmit:this.callAddStock,types:["text","number"],labels:["Stock Symbol","Number of shares"],buttonContent:"Add stock",buttonClass:"myBtn-light"}),c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"Symbol"),c.a.createElement("th",{scope:"col"},"Unit value"),c.a.createElement("th",{scope:"col"},"Quantity"),c.a.createElement("th",{scope:"col"},"Total value"))),c.a.createElement("tbody",null,t)),c.a.createElement("div",{className:"centered"},c.a.createElement(y,{classes:"myBtn-light",content:"Remove Selected Stocks",icon:"delete_outline",action:this.props.removeSelectedStocks.bind(this,this.props.name)}),c.a.createElement(y,{classes:"myBtn-light",content:"Show Chart",icon:"insert_chart_outlined",action:this.props.showChart.bind(this,this.props.name)})))}}]),t}(n.Component),S=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e={labels:this.props.labels,datasets:this.props.datasets};return c.a.createElement("div",{className:this.props.shown?"modal":"modal hide"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",null,c.a.createElement("i",{className:"material-icons",onClick:this.props.hideModal},"cancel")),c.a.createElement(d.a,{data:e,options:{}}),c.a.createElement("div",{className:"centered"},c.a.createElement(R,{texts:["1d","1m","3m","6m","ytd","1y","2y","5y"],titles:["One day","One month","Three months","Six months","Year-to-date","One year","Two years","Five years"],changeSelected:this.props.changeRange,selectedText:this.props.range}))))}}]),t}(n.Component),C=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement("img",{className:"logo",src:this.props.src,alt:""})}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(u.a)(t).call(this,e))).state={error:null,isLoaded:!1,logoLoaded:!1,price:0},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e,t=this,a=b(this.props.symbol),n=(e=this.props.symbol,p+"stock/"+encodeURI(e)+"/logo");fetch(a).then(function(e){return e.json()}).then(function(e){e==={}?alert("Unknown symbol."):t.setState({isLoaded:!0,price:e.latestPrice})},function(e){t.setState({isLoaded:!0,error:e})}),fetch(n).then(function(e){return e.json()}).then(function(e){e==={}?alert("Unknown symbol's logo."):t.setState({logoLoaded:!0,logo:e.url})},function(e){t.setState({logoLoaded:!0,error:e})})}},{key:"render",value:function(){var e,t=this.props.currency;null==t&&(t="USD"),e="EUR"===t?this.state.price*this.props.currencyRate:this.state.price;var a=this.props.selected;return this.state.isLoaded&&this.state.logoLoaded&&this.props.currencyRate>0?c.a.createElement("tr",{className:a?"selected":"",onClick:this.props.changeSelectState.bind(this,this.props.symbol)},c.a.createElement("th",{scope:"row"},c.a.createElement(C,{src:this.state.logo}),this.props.symbol),c.a.createElement("td",null,new Intl.NumberFormat("fi-FI",{style:"currency",currency:t}).format(e)),c.a.createElement("td",null,this.props.shares),c.a.createElement("td",null,new Intl.NumberFormat("fi-FI",{style:"currency",currency:t}).format(e*this.props.shares))):c.a.createElement("tr",null,c.a.createElement("th",{scope:"row"},this.props.symbol),c.a.createElement("td",null,c.a.createElement(E,null)),c.a.createElement("td",null,this.props.shares),c.a.createElement("td",null,c.a.createElement(E,null)))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(u.a)(t).call(this,e))).clickHandler=a.clickHandler.bind(Object(r.a)(Object(r.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"clickHandler",value:function(){this.props.changeCurrency()}},{key:"render",value:function(){var e,t;return"EUR"===this.props.currency?(e="switchActive",t="switchDisabled"):(t="switchActive",e="switchDisabled"),c.a.createElement("div",{className:"switch",onClick:this.clickHandler},c.a.createElement("div",{className:e},c.a.createElement("i",{className:"material-icons"},"euro_symbol")),c.a.createElement("div",{className:t},c.a.createElement("i",{className:"material-icons"},"attach_money")))}}]),t}(n.Component),R=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){for(var e,t=[],a=0;a<this.props.texts.length;a++)e=this.props.selectedText===this.props.texts[a]?"switchActive":"switchDisabled",t.push(c.a.createElement(x,{key:this.props.texts[a],text:this.props.texts[a],className:e,icon:void 0!==this.props.icons?this.props.icons[a]:null,title:void 0!==this.props.titles?this.props.titles[a]:null,clickHandler:this.props.changeSelected}));return c.a.createElement("div",{className:"switch-multiple mt-3"},t)}}]),t}(n.Component),x=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e;return e=null===this.props.icon?this.props.text:c.a.createElement("i",{className:"material-icons"},"this.props.icon"),c.a.createElement("div",Object.assign({},null!==this.props.title?{title:this.props.title}:{},{className:this.props.className,onClick:this.props.clickHandler.bind(this,this.props.text)}),e)}}]),t}(n.Component),U=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"parallax"},c.a.createElement("a",{href:"#main"},c.a.createElement("i",{className:"material-icons"},"expand_more"))),c.a.createElement("main",null,c.a.createElement("div",{className:"container",id:"main"},c.a.createElement(O,null))),c.a.createElement("footer",{className:"footer"},"Data provided for free by ",c.a.createElement("a",{href:"https://iextrading.com/developer"},"IEX"),". View ",c.a.createElement("a",{href:"https://iextrading.com/api-exhibit-a/"},"IEX\u2019s Terms of Use"),"."))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},67:function(e,t,a){e.exports=a(213)}},[[67,2,1]]]);
//# sourceMappingURL=main.ea0fe8b5.chunk.js.map